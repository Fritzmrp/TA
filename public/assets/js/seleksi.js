// Rules untuk kategori "Seleksi"
var seleksiRules = [
    {
        question: "Jalur seleksi apa saja yang tersedia di Institut Teknologi Del?",
        answer: "Di Institut Teknologi Del, terdapat beberapa jalur seleksi seperti Seleksi Bersama Masuk Perguruan Tinggi Negeri (SBMPTN), Seleksi Mandiri, dan jalur prestasi akademik."
    },
    {
        question: "Persyaratan apa saja yang harus dipenuhi untuk mengikuti jalur seleksi SPMB IT Del?",
        answer: "Persyaratan untuk mengikuti seleksi di Institut Teknologi Del dapat berbeda-beda tergantung jalur seleksinya. Namun, umumnya persyaratan meliputi kelulusan SMA/SMK/sederajat dan mengikuti prosedur pendaftaran yang ditentukan."
    },
    {
        question: "Bagaimana cara melihat hasil seleksi SPMB IT Del?",
        answer: "Hasil seleksi SPMB IT Del dapat dilihat melalui website resmi Institut Teknologi Del atau melalui pengumuman resmi yang akan diinformasikan kepada peserta seleksi."
    },
    {
        question: "Kapan pengumuman hasil seleksi SPMB IT Del?",
        answer: "Pengumuman hasil seleksi SPMB IT Del biasanya dilakukan setelah proses seleksi selesai dan semua evaluasi telah dilakukan. Jadwal pengumuman akan diinformasikan kepada peserta seleksi melalui website resmi atau media komunikasi lainnya."
    }
];

// Rules tambahan untuk kategori "Seleksi"
var additionalRules = [
    {
        question: "jalur seleksi",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "jalur",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "jalur penerimaan",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "penerimaan",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "proses seleksi",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "sistem seleksi",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "ujian seleksi",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "ujian",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "penilaian seleksi",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "penilaian",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "jadwal seleksi",
        answer: "Jalur seleksi yang disediakan oleh SPMB IT Del adalah sebanyak 6 jalur yaitu sebagai berikut:\n1. PMDK (Penelusuran Minat Bakat dan Kemampuan)\n2. USM 1 (Ujian Saring Masuk)\n3. USM 2 (Ujian Saring Masuk)\n4. USM 3 (Ujian Saring Masuk)\n5. UTBK (Ujian Tulis Berbasis Komputer/Sertifikat UTBK)\n6. JPS (Jalur Prestasi Siswa)\n\nUntuk detail jadwal masing-masing jalur dapat dilihat melalui link berikut:\nhttps://spmb.del.ac.id/index.php?r=pmb-pendaftaran%2Findex"
    },
    {
        question: "persyaratan seleksi",
        answer: "Berikut merupakan persyaratan yang harus dipenuhi oleh calon pendaftar SPMB IT Del. Terdapat dua persyaratan yaitu persyaratan umum dan persyaratan khusus program studi:\n\na) Persyaratan umum\n1. Memiliki minat yang tinggi untuk melanjutkan studi di IT Del dan akan mendaftarkan diri sebagai mahasiswa IT Del apabila dinyatakan lulus seleksi untuk program USM;\n2. Siswa berasal dari jurusan yang tidak termasuk dalam kelompok Ilmu Sosial, Budaya atau Bahasa;\n3. Lulusan SMA atau SMK Teknik pada semua jurusan dengan tahun ijazah 2021, 2022, 2023;\n4. Usia maksimum 21 tahun per 31 Agustus 2024;\n5. Mengikuti tes akademik daring berupa Matematika, Bahasa Inggris, dan Tes Potensi Akademik;\n6. Dapat memilih maksimal 3 pilihan program studi, dari 9 program studi yang ada di IT Del.\n\nb) Persyaratan khusus program studi\na) Program Studi S1 Teknik Elektro:\n• *Tidak Buta Warna, dibuktikan dengan melampirkan Surat Keterangan Tidak Buta Warna dari Dokter Spesialis Mata\n• SMA jurusan IPA/MIA atau SMK Teknik (Elektro, Elektronika, Listrik)\nb) Program Studi S1 Teknik Bioproses:\n• *Tidak Buta Warna, dibuktikan dengan melampirkan Surat Keterangan Tidak Buta Warna dari Dokter Spesialis Mata\n• SMA jurusan IPA/MIA.\nc) Program Studi Manajemen Rekayasa:\n• Mata\n• SMA jurusan IPA/MIA.\nd) Program Studi S1 Informatika, S1 Sistem Informasi, D4 Teknologi Rekayasa Perangkat Lunak, D3 Teknologi Informasi dan D3 Teknologi Komputer:\n• SMA jurusan IPA/MIA atau SMK Teknik (Informatika, Komputer).\n\nKet *: disampaikan pada saat daftar ulang daring"
    },
    {
        question: "syarat seleksi",
        answer: "Berikut merupakan persyaratan yang harus dipenuhi oleh calon pendaftar SPMB IT Del. Terdapat dua persyaratan yaitu persyaratan umum dan persyaratan khusus program studi:\n\na) Persyaratan umum\n1. Memiliki minat yang tinggi untuk melanjutkan studi di IT Del dan akan mendaftarkan diri sebagai mahasiswa IT Del apabila dinyatakan lulus seleksi untuk program USM;\n2. Siswa berasal dari jurusan yang tidak termasuk dalam kelompok Ilmu Sosial, Budaya atau Bahasa;\n3. Lulusan SMA atau SMK Teknik pada semua jurusan dengan tahun ijazah 2021, 2022, 2023;\n4. Usia maksimum 21 tahun per 31 Agustus 2024;\n5. Mengikuti tes akademik daring berupa Matematika, Bahasa Inggris, dan Tes Potensi Akademik;\n6. Dapat memilih maksimal 3 pilihan program studi, dari 9 program studi yang ada di IT Del.\n\nb) Persyaratan khusus program studi\na) Program Studi S1 Teknik Elektro:\n• *Tidak Buta Warna, dibuktikan dengan melampirkan Surat Keterangan Tidak Buta Warna dari Dokter Spesialis Mata\n• SMA jurusan IPA/MIA atau SMK Teknik (Elektro, Elektronika, Listrik)\nb) Program Studi S1 Teknik Bioproses:\n• *Tidak Buta Warna, dibuktikan dengan melampirkan Surat Keterangan Tidak Buta Warna dari Dokter Spesialis Mata\n• SMA jurusan IPA/MIA.\nc) Program Studi Manajemen Rekayasa:\n• Mata\n• SMA jurusan IPA/MIA.\nd) Program Studi S1 Informatika, S1 Sistem Informasi, D4 Teknologi Rekayasa Perangkat Lunak, D3 Teknologi Informasi dan D3 Teknologi Komputer:\n• SMA jurusan IPA/MIA atau SMK Teknik (Informatika, Komputer).\n\nKet *: disampaikan pada saat daftar ulang daring"
    },
    {
        question: "hasil seleksi",
        answer: "Hasil Seleksi SPMB dapat di lihat pada website resmi https://spmb.del.ac.id/ yang terdapat pada halaman home bagian pengumuman atau dapat dilihat pada link berikut: http://spmb.del.ac.id/index.php?r=pmb-pengumuman%2Findex"
    },
    {
        question: "pengumuman hasil seleksi",
        answer: "Hasil Seleksi SPMB dapat di lihat pada website resmi https://spmb.del.ac.id/ yang terdapat pada halaman home bagian pengumuman atau dapat dilihat pada link berikut: http://spmb.del.ac.id/index.php?r=pmb-pengumuman%2Findex"
    },
    {
        question: "pengumuman seleksi",
        answer: "Hasil Seleksi SPMB dapat di lihat pada website resmi https://spmb.del.ac.id/ yang terdapat pada halaman home bagian pengumuman atau dapat dilihat pada link berikut: http://spmb.del.ac.id/index.php?r=pmb-pengumuman%2Findex"
    },
    {
        question: "hasil akhir",
        answer: "Hasil Seleksi SPMB dapat di lihat pada website resmi https://spmb.del.ac.id/ yang terdapat pada halaman home bagian pengumuman atau dapat dilihat pada link berikut: http://spmb.del.ac.id/index.php?r=pmb-pengumuman%2Findex"
    },
    {
        question: "pengumuman",
        answer: "Hasil Seleksi SPMB dapat di lihat pada website resmi https://spmb.del.ac.id/ yang terdapat pada halaman home bagian pengumuman atau dapat dilihat pada link berikut: http://spmb.del.ac.id/index.php?r=pmb-pengumuman%2Findex"
    },
    // Tambahkan aturan tambahan lain jika diperlukan
];

// Fungsi untuk menampilkan kategori seleksi
function selectCategory(category) {
    document.getElementById('categories').style.display = 'none'; 
    document.getElementById('chat-input').style.display = 'inline-flex'; 

    var message;
    switch (category) {
        case 'Seleksi':
            message = "Anda memilih 'Seleksi'. Pilih pertanyaan di bawah ini:";
            displayMessage(message, 'admin');
            displayQuestionButtons(seleksiRules); // Panggil fungsi untuk menampilkan pertanyaan kategori Seleksi dengan aturan yang didefinisikan di seleksiRules
            break;
        // Tambahkan case untuk kategori lain jika diperlukan
        default:
            message = "Bagaimana saya bisa membantu Anda?";
            displayMessage(message, 'admin');
            break;
    }
    document.getElementById('chatbot-container').classList.add('open');
}

// Fungsi untuk menampilkan tombol pertanyaan kategori seleksi
function displayQuestionButtons() {
    var questions = [
        "Jalur seleksi apa saja yang tersedia di Institut Teknologi Del?",
        "Persyaratan apa saja yang harus dipenuhi untuk mengikuti jalur seleksi SPMB IT Del?",
        "Bagaimana cara melihat hasil seleksi SPMB IT Del?",
        "Kapan pengumuman hasil seleksi SPMB IT Del?",
    ];

    var questionList = document.createElement('ul');
    questionList.classList.add('question-list');

    questions.forEach(function(question) {
        var listItem = document.createElement('li');
        listItem.textContent = question;
        listItem.classList.add('question-button');
        listItem.onclick = function() {
            processUserInput(question);
        };
        questionList.appendChild(listItem);
    });

    document.getElementById('chatbot-content').appendChild(questionList);
}

// Fungsi untuk mencocokkan input pengguna dengan aturan yang ada
function matchRule(input, seleksiRules, additionalRules) {
    input = input.toLowerCase(); // Ubah input menjadi huruf kecil untuk pencocokan yang tidak case-sensitive

    // Periksa aturan utama
    for (var i = 0; i < seleksiRules.length; i++) {
        var rule = seleksiRules[i];
        var keywords = rule.question.toLowerCase().split(' ');
        var match = true;
        keywords.forEach(function(keyword) {
            if (input.indexOf(keyword) === -1) {
                match = false;
            }
        });
        if (match) {
            return rule.answer;
        }
    }
    
    // Periksa aturan tambahan
    for (var j = 0; j < additionalRules.length; j++) {
        var additionalRule = additionalRules[j];
        if (input.indexOf(additionalRule.question) !== -1) {
            return additionalRule.answer;
        }
    }
    
    // Penanganan khusus untuk pertanyaan "Persyaratan seleksi" dan "syarat seleksi"
    if (input.includes("persyaratan seleksi") || input.includes("syarat seleksi")) {
        var persyaratanSeleksiAnswer = "Berikut merupakan persyaratan yang harus dipenuhi oleh calon pendaftar SPMB IT Del. Terdapat dua persyaratan yaitu persyaratan umum dan persyaratan khusus program studi:\n\na) Persyaratan umum\n1. Memiliki minat yang tinggi untuk melanjutkan studi di IT Del dan akan mendaftarkan diri sebagai mahasiswa IT Del apabila dinyatakan lulus seleksi untuk program USM;\n2. Siswa berasal dari jurusan yang tidak termasuk dalam kelompok Ilmu Sosial, Budaya atau Bahasa;\n3. Lulusan SMA atau SMK Teknik pada semua jurusan dengan tahun ijazah 2021, 2022, 2023;\n4. Usia maksimum 21 tahun per 31 Agustus 2024;\n5. Mengikuti tes akademik daring berupa Matematika, Bahasa Inggris, dan Tes Potensi Akademik;\n6. Dapat memilih maksimal 3 pilihan program studi, dari 9 program studi yang ada di IT Del.\n\nb) Persyaratan khusus program studi\na) Program Studi S1 Teknik Elektro: \n• *Tidak Buta Warna, dibuktikan dengan melampirkan Surat Keterangan Tidak Buta Warna dari Dokter Spesialis Mata \n• SMA jurusan IPA/MIA atau SMK Teknik (Elektro, Elektronika, Listrik)\nb) Program Studi S1 Teknik Bioproses: \n• *Tidak Buta Warna, dibuktikan dengan melampirkan Surat Keterangan Tidak Buta Warna dari Dokter Spesialis Mata \n• SMA jurusan IPA/MIA atau SMK Teknik (Kimia, Rekayasa Perangkat Lunak, Teknik Komputer dan Jaringan, Elektronika, Otomatisasi dan Tata Kelola Perkantoran, Teknik Gambar Bangunan)\nc) Program Studi S1 Informatika: \n• *Tidak Buta Warna, dibuktikan dengan melampirkan Surat Keterangan Tidak Buta Warna dari Dokter Spesialis Mata \n• SMA jurusan IPA/MIA atau SMK Teknik (Rekayasa Perangkat Lunak, Teknik Komputer dan Jaringan, Elektronika, Otomatisasi dan Tata Kelola Perkantoran)\n\n*Khusus untuk program studi S1 Teknik Elektro, S1 Teknik Bioproses, dan S1 Informatika yang mempunyai persyaratan Tidak Buta Warna";
        return persyaratanSeleksiAnswer;
    }

    // Jika tidak ada aturan yang cocok, kembalikan pesan default
    return "Maaf, saya tidak mengerti pertanyaan Anda tentang seleksi.";
}

// Fungsi untuk menampilkan jawaban
function displayAnswer(answer) {
    if (answer.includes('\n')) {
        var answerParts = answer.split('\n');
        answerParts.forEach(part => displayMessage(part, 'admin'));
    } else {
        displayMessage(answer, 'admin');
    }
}

// Fungsi untuk memproses input pengguna
function processUserInput(input) {
    displayMessage(input, 'user'); // Menampilkan pesan pengguna di chat
    if (input.trim() !== '') { // Periksa apakah input tidak kosong
        var answer = matchRule(input, seleksiRules, additionalRules);
        displayAnswer(answer);
    }
}

// Fungsi untuk menampilkan pesan di chat
function displayMessage(message, sender) {
    var chatContent = document.getElementById('chatbot-content');
    var chatMessage = document.createElement('div');
    chatMessage.className = 'chat-message';
    chatMessage.innerHTML = "<p><strong>" + (sender === 'user' ? 'You' : 'Admin') + ": </strong>" + message + "</p>";
    chatContent.appendChild(chatMessage);
    chatContent.scrollTop = chatContent.scrollHeight;
}

// Fungsi untuk mengirim pesan
function sendMessage() {
    var userInput = document.getElementById('user-input').value;
    processUserInput(userInput); // Memproses input pengguna
    document.getElementById('user-input').value = ''; // Mengosongkan input setelah pengguna mengirim pesan
}